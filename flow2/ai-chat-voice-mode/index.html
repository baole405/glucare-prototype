<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <link
      href="https://fonts.googleapis.com/css?family=Calibri&display=swap"
      rel="stylesheet"
    />
    <link href="./css/main.css" rel="stylesheet" />
    <title>AI Chat - Voice Mode</title>
    <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
        c[a] =
          c[a] ||
          function () {
            (c[a].q = c[a].q || []).push(arguments);
          };
        t = l.createElement(r);
        t.async = 1;
        t.src = "https://www.clarity.ms/tag/" + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, "clarity", "script", "trimm9bv8x");
    </script>
  </head>
  <body>
    <main class="screen">
      <header class="app-bar">
        <a href="../ai-chat/index.html" class="back-btn" title="Quay lại">
          <svg viewBox="0 0 24 24">
            <path
              d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"
            />
          </svg>
        </a>
        <h1>AI Chat - Voice</h1>
      </header>

      <div class="content">
        <div class="voice-container">
          <div class="voice-status">
            <div class="recording-indicator" id="recordingIndicator">
              <div class="pulse-ring"></div>
              <div class="pulse-ring pulse-ring-delay"></div>
              <div class="mic-icon">
                <svg viewBox="0 0 24 24">
                  <path
                    d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"
                  />
                </svg>
              </div>
            </div>
            <h2 id="statusText">Nhấn để bắt đầu ghi âm</h2>
            <p id="statusSubtext">AI sẽ lắng nghe và trả lời bằng giọng nói</p>
          </div>

          <div class="voice-controls">
            <button class="voice-record-btn" id="recordBtn">
              <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" fill="currentColor" />
                <circle cx="12" cy="12" r="3" fill="#56c6d1" />
              </svg>
              <span>Ghi âm</span>
            </button>

            <div class="voice-options">
              <button class="option-btn" id="textModeBtn">
                <svg viewBox="0 0 24 24">
                  <path
                    d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.1 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"
                  />
                </svg>
                Chế độ văn bản
              </button>
            </div>
          </div>

          <div class="voice-tips">
            <h3>Mẹo sử dụng:</h3>
            <ul>
              <li>Nói rõ ràng và gần micro</li>
              <li>Hỏi về chế độ ăn uống, thuốc men, hoặc hoạt động</li>
              <li>AI sẽ trả lời bằng tiếng Việt</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Bottom Tab Navigation -->
      <nav class="bottom-nav">
        <a href="../../flow3/history/index.html" title="Lịch sử">
          <svg viewBox="0 0 24 24">
            <path
              d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5-7h-2v-2h2v2zm-4 0H8v-2h2v2zm4 4h-2v-2h2v2zm-4 0H8v-2h2v2zm-4-4h2v2H6v-2z"
            />
          </svg>
          <span>Lịch sử</span>
        </a>
        <a href="../../flow4/Diary/index.html" title="Nhật ký">
          <svg viewBox="0 0 24 24">
            <path
              d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5-7h-2v-2h2v2zm-4 0H8v-2h2v2zm4 4h-2v-2h2v2zm-4 0H8v-2h2v2zm-4-4h2v2H6v-2z"
            />
          </svg>
          <span>Nhật ký</span>
        </a>
        <a href="../home-1/index.html" title="Trang chủ">
          <svg viewBox="0 0 24 24">
            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
          </svg>
          <span>Trang chủ</span>
        </a>
        <a href="../../flow3/trending1/index.html" title="Xu hướng">
          <svg viewBox="0 0 24 24">
            <path
              d="M16 6l2.29 2.29-4.58 4.58-4-4L2 16.86 3.41 18.27 9.41 12.27l4 4 6.3-6.29L22 12v-6z"
            />
          </svg>
          <span>Xu hướng</span>
        </a>
        <a href="../../userprofile/table-content/index.html" title="Tài khoản">
          <svg viewBox="0 0 24 24">
            <path
              d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
            />
          </svg>
          <span>Tài khoản</span>
        </a>
      </nav>
    </main>

    <script>
      const recordBtn = document.getElementById("recordBtn");
      const statusText = document.getElementById("statusText");
      const statusSubtext = document.getElementById("statusSubtext");
      const recordingIndicator = document.getElementById("recordingIndicator");
      const textModeBtn = document.getElementById("textModeBtn");

      let isRecording = false;

      recordBtn.addEventListener("click", () => {
        isRecording = !isRecording;

        if (isRecording) {
          recordingIndicator.classList.add("recording");
          statusText.textContent = "Đang ghi âm...";
          statusSubtext.textContent = "Nói câu hỏi của bạn";
          recordBtn.innerHTML = `
            <svg viewBox="0 0 24 24">
              <rect x="6" y="6" width="12" height="12" fill="currentColor" />
            </svg>
            <span>Dừng</span>
          `;
          recordBtn.classList.add("recording");
        } else {
          recordingIndicator.classList.remove("recording");
          statusText.textContent = "Đã dừng ghi âm";
          statusSubtext.textContent = "Đang xử lý câu hỏi của bạn...";
          recordBtn.innerHTML = `
            <svg viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10" fill="currentColor" />
              <circle cx="12" cy="12" r="3" fill="#56c6d1" />
            </svg>
            <span>Ghi âm</span>
          `;
          recordBtn.classList.remove("recording");

          // Simulate processing and redirect to text chat
          setTimeout(() => {
            window.location.href = "../ai-chat/index.html";
          }, 2000);
        }
      });

      textModeBtn.addEventListener("click", () => {
        window.location.href = "../ai-chat/index.html";
      });
    </script>
  </body>
</html>
